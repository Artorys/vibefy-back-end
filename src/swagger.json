{
  "openapi": "3.0.0",
  "info": {
    "title": "Vibefy API",
    "description": "API para um streamer de músicas de forma aleatória, baseada em playlists de acordo com a vibe do usuário",
    "termsOfService": "http://localhost:3000/terms",
    "contact": {
      "email": "support@vibefy.com"
    },
    "version": "1.0.0"
  },

  "paths": {
    "/user": {
      "post": {
        "summary": "Criação de usuários",
        "description": "Esta rota faz a criação de usuários para o aplicativo",
        "tags": ["User"],
        "requestBody": {
          "content": {
            "application.json": {
              "schema": {
                "$ref": "#/components/schemas/createUser"
              },
              "examples": {
                "user": {
                  "value": {
                    "name": "Janet",
                    "email": "email@user.com",
                    "password": "1234"
                  }
                }
              }
            }
          }
        },

        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "application.json": {
                "schema": {
                  "$ref": "#/components/schemas/responseUser"
                },
                "example": {
                  "id": "21369faaa2ddabffab03d3e80e08ac1181526a",
                  "name": "Joana",
                  "email": "joana@kenzie.com",
                  "avatar_img": "https://www.lance.com.br/files/article_main/uploads/2022/04/29/626c07807ccfa.jpeg",
                  "isActive": "true",
                  "payment": {},
                  "playlist": [],
                  "created_At": "December 17, 1995 03:24:00",
                  "updated_At": "December 17, 1995 03:24:00"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application.json": {
                "example": {
                  "message": "Field is required"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application.json": {
                "example": { "message": "Email is already being used" }
              }
            }
          }
        }
      }
    },
    "/user/profile": {
      "get": {
        "security": [{ "bearerAuth": [] }],
        "tags": ["User"],
        "summary": "Listar o próprio perfil",
        "description": "Esta rota faz a listagem do próprio perfil do usuário, esta rota necessita de autenticação",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application.json": {
                "schema": {
                  "$ref": "#/components/schemas/responseUser"
                },

                "example": {
                  "id": "21369faaa2ddabffab03d3e80e08ac1181526a",
                  "name": "Joana",
                  "email": "joana@kenzie.com",
                  "avatar_img": "https://www.lance.com.br/files/article_main/uploads/2022/04/29/626c07807ccfa.jpeg",
                  "isActive": "true",
                  "payment": {},
                  "playlist": [],
                  "created_At": "December 17, 1995 03:24:00",
                  "updated_At": "December 17, 1995 03:24:00"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/UnauthorizedError"
          }
        }
      },
      "patch": {
        "security": [{ "bearerAuth": [] }],
        "tags": ["User"],
        "summary": "Atualizar informações do usuário",
        "description": "Esta rota faz a atualização das informações do usuário, esta rota necessita de autenticação",
        "requestBody": {
          "content": {
            "application.json": {
              "schema": {
                "$ref": "#/components/schemas/createUser"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Updated",
            "content": {
              "application.json": {
                "example": { "message": "User updated" }
              }
            }
          },
          "401": {
            "$ref": "#/components/UnauthorizedError"
          }
        }
      },
      "delete": {
        "security": [{ "bearerAuth": [] }],
        "tags": ["User"],
        "summary": "Desativar perfil de usuário",
        "description": "Esta rota desativa o perfil do usuário",
        "requestBody": {
          "content": {
            "application.json": {
              "schema": {
                "type": "object",
                "properties": {
                  "isActive": "boolean"
                }
              },
              "example": {
                "isActive": "false"
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "Success",
            "content": {
              "application.json": {
                "example": { "message": "Usuário desativado" }
              }
            }
          },
          "401": {
            "$ref": "#/components/UnauthorizedError"
          }
        }
      }
    },
    "/user/profile/img": {
      "post": {
        "security": [{ "bearerAuth": [] }],
        "tags": ["User"],
        "summary": "Enviar imagem de usuário",
        "description": "Altera a imagem de usuário",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "avatar_img": { "type": "string", "format": "binary" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Added",
            "content": {
              "application.json": {
                "example": { "message": "Image upload success" }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application.json": {
                "example": [
                  { "message": "Image field is required" },
                  { "message": "Image format must be png or jpeg" }
                ]
              }
            }
          },
          "401": {
            "$ref": "#/components/UnauthorizedError"
          }
        }
      }
    }
  },

  "components": {
    "schemas": {
      "createUser": {
        "type": "object",
        "properties": {
          "name": { "type": "string" },
          "email": { "type": "string" },
          "password": { "type": "string" }
        }
      },
      "responseUser": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "name": { "type": "string" },
          "email": { "type": "string" },
          "avatar_img": { "type": "string" },
          "isActive": { "type": "boolean" },
          "payment": { "type": "object" },
          "playlist": { "type": "array" },
          "created_At": { "type": "string" },
          "updated_At": { "type": "string" }
        }
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "UnauthorizedError": {
      "description": "Unauthorized",
      "content": {
        "application.json": {
          "example": { "message": "Invalid token" }
        }
      }
    }
  }
}
